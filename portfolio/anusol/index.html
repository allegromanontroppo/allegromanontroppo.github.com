<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]> <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]> <html class="ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]> <html class="ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]> <!--> <html lang="en"> <![endif]-->
<head>
  <meta charset='utf-8'>
  <meta content='initial-scale=1.0' name='viewport'>
  <title>Anusol | Portfolio | Mark Holland</title>
  <link href="/stylesheets/application.css" rel="stylesheet" type="text/css" media="all" />
  <script src="/javascripts/vendor/custom.modernizr.js" type="text/javascript"></script>
</head>
<body>
  <div class='off-canvas-wrap'>
    <div class='inner-wrap'>
      <a class='exit-off-canvas'></a>
      <aside class='left-off-canvas-menu'>
        <ul class='off-canvas-list'>
          <li>
            <a href='/about-me/'>About Me</a>
          </li>
          <li>
            <a href='/opera'>My Opera Site</a>
          </li>
        </ul>
        <ul class='off-canvas-list'>
          <li>
            <label>Blog</label>
          </li>
          <li><a href="/blog/2015/01/01/desert-island-discs-2015/">Desert Island discs 2015</a></li>
          <li><a href="/blog/2014/12/20/the-chanukah-song/">The Chanukah Song</a></li>
          <li><a href="/blog/2014/12/06/jeremy-thorpe/">Jeremy Thorpe</a></li>
          <li><a href="/blog/2014/10/14/the-secret-of-comedy-timing/">The secret of comedy timing</a></li>
          <li><a href="/blog/2014/08/16/harvest/">Harvest</a></li>
        </ul>
        <ul class='off-canvas-list'>
          <li>
            <label>Elsewhere</label>
          </li>
          <li>
            <a href='http://twitter.com/HughJampton' target='_blank'>Twitter</a>
          </li>
          <li>
            <a href='http://app.strava.com/athletes/allegromanontroppo' target='_blank'>Strava</a>
          </li>
          <li>
            <a href='https://github.com/allegromanontroppo' target='_blank'>Github</a>
          </li>
          <li>
            <a href='http://www.thisismyjam.com/HughJampton' target='_blank'>This Is My Jam</a>
          </li>
          <li>
            <a href='http://leningrad-velo.herokuapp.com/' target='_blank'>Leningrad Velo</a>
          </li>
        </ul>
      </aside>
      <nav class='tab-bar show-for-small'>
        <section class='left-small'>
          <a class='left-off-canvas-toggle menu-icon'>
            <span></span>
          </a>
        </section>
        <section class='right tab-bar-section'>
          <h1>Mark Holland</h1>
        </section>
      </nav>
      <div class='main-section'>
        <div class='contain-to-grid hide-for-small'>
          <nav class='top-bar' data-topbar=''>
            <ul class='title-area'>
              <!-- Title Area -->
              <li class='name'>
                <h1><a href="/">Mark Holland</a></h1>
              </li>
              <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alonex -->
            </ul>
            <section class='top-bar-section'>
              <!-- Right Nav Section -->
              <ul class='right'>
                <li class='divider hide-for-small'></li>
                <li>
                  <a href='/opera'>My Opera Site</a>
                </li>
                <li class='divider'></li>
                <li class='has-dropdown'>
                  <a href='/'>Blog</a>
                  <ul class='dropdown'>
                    <li><a href="/blog/2015/01/01/desert-island-discs-2015/">Desert Island discs 2015</a></li>
                    <li><a href="/blog/2014/12/20/the-chanukah-song/">The Chanukah Song</a></li>
                    <li><a href="/blog/2014/12/06/jeremy-thorpe/">Jeremy Thorpe</a></li>
                    <li><a href="/blog/2014/10/14/the-secret-of-comedy-timing/">The secret of comedy timing</a></li>
                    <li><a href="/blog/2014/08/16/harvest/">Harvest</a></li>
                  </ul>
                </li>
                <li class='divider'></li>
                <li>
                  <a href='/about-me/'>About Me</a>
                </li>
                <li class='divider'></li>
                <li class='active has-dropdown'>
                  <a href="/portfolio/">Portfolio</a>
                  <ul class='dropdown'>
                    <li class='active'><a href="/portfolio/anusol/">Anusol</a></li>
                    <li><a href="/portfolio/benadryl/">Benadryl</a></li>
                    <li><a href="/portfolio/boozle-blog/">Boozle Blog</a></li>
                    <li><a href="/portfolio/calpol/">Calpol</a></li>
                    <li><a href="/portfolio/fortnum-and-mason/">Fortnum and Mason</a></li>
                    <li><a href="/portfolio/icklepickles-trip-tracker/">Icklepickles Trip Tracker</a></li>
                    <li><a href="/portfolio/navitas-ip/">Navitas IP</a></li>
                    <li><a href="/portfolio/pensilva-history-group/">Pensilva History Group</a></li>
                    <li><a href="/portfolio/redbox-digital/">Redbox Digital</a></li>
                    <li><a href="/portfolio/testplant-eggplant/">Testplant Eggplant</a></li>
                    <li><a href="/portfolio/world-book-night/">World Book Night</a></li>
                  </ul>
                </li>
                <li class='divider'></li>
                <li class='has-dropdown'>
                  <a href='#'>Elsewhere</a>
                  <ul class='dropdown'>
                    <li>
                      <a href='http://twitter.com/HughJampton' target='_blank'>Twitter</a>
                    </li>
                    <li>
                      <a href='http://app.strava.com/athletes/allegromanontroppo' target='_blank'>Strava</a>
                    </li>
                    <li>
                      <a href='https://github.com/allegromanontroppo' target='_blank'>Github</a>
                    </li>
                    <li>
                      <a href='http://www.thisismyjam.com/HughJampton' target='_blank'>This Is My Jam</a>
                    </li>
                    <li>
                      <a href='http://leningrad-velo.herokuapp.com/' target='_blank'>Leningrad Velo</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </section>
          </nav>
        </div>
        <section id='hero'>
          <div class='row'>
            <div class='column'>
              <h1>Portfolio</h1>
            </div>
          </div>
        </section>
        <div class='main'>
          <div class='row'>
            <div class='columns large-9 large-push-3'>
              <article>
                <h1 class='text-center'><a href="/portfolio/anusol/">Anusol</a></h1>
                
                <p>This is an all HTML site which I came in and sprinkled some fairy dust over.</p>
                
                <p>The initial product had a lot of Flash frills with no alternatives so I created numerous HTML fall backs.</p>
                
                <p>The best bit, however, is on this video page:</p>
                
                <p><img alt="Anusol 1" src="/images/portfolio/anusol/1.png" /></p>
                
                <p>I make use of Aaron Quint's tremendous <a href="//www.sammyjs.org">Sammy JS</a> library for in-page 'hash bang' navigation. Sammy JS allows one to define actions based on routes in a Sinatra style. It's really simple to use and code is pleasingly terse as it eliminates what can become quite a mess of click handlers. (This is years before Angular.js and such like.)</p>
                
                <p><img alt="Anusol 2" src="/images/portfolio/anusol/2.png" /></p>
                
                <p>The href of each video thumbnail is a hash link. Eg '#/causes-of-piles…'. When the link is clicked, just like in Sinatra, the '/:id' route is called and the parameter's value is able to be accessed through the 'params[]' array. We can then do the appropriate task accordingly. In this case it is to pluck out the Video object with the matching slug and insert its YouTube embed markup into the video container.</p>
                
                <p>Here's the business end of the code.</p>
                
                <pre><code>(function ($) {&#x000A;&#x000A;    function Video(opts) {&#x000A;        this.slug = opts.slug;&#x000A;        this.caption = opts.caption;&#x000A;        this.url = opts.url;&#x000A;        this.time = opts.time;&#x000A;    }&#x000A;&#x000A;    Video.prototype.renderPlayer = function () {&#x000A;        var template = '&lt;iframe width="520" height="349" src="{{url}}" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;';&#x000A;        return Mustache.to_html(template, this);&#x000A;    };&#x000A;&#x000A;    Video.prototype.renderSelector = function () {&#x000A;        var template = '&lt;li&gt;&lt;a href="#/{{slug}}"&gt;&lt;img src="flash/video/covers/{{slug}}_thumb.png" /&gt;&lt;span&gt;{{time}}&lt;/span&gt;&lt;/a&gt;&lt;span class="caption"&gt;{{caption}}&lt;/span&gt;&lt;/li&gt;';&#x000A;        return Mustache.to_html(template, this);&#x000A;    };&#x000A;&#x000A;    var videos = [];&#x000A;&#x000A;    videos.push(new Video({&#x000A;        slug: 'what-are-piles-and-their-symptoms',&#x000A;        caption: 'What are piles &amp;amp; their symptoms?',&#x000A;        url: 'http://www.youtube.com/embed/YEuDEKzc40c?rel=0&amp;showinfo=0',&#x000A;        time: '4:16'&#x000A;    }));&#x000A;&#x000A;    videos.push(new Video({&#x000A;        slug: 'causes-of-piles-and-treatment-options',&#x000A;        caption: 'Curious about the causes &amp;amp; how to treat piles?',&#x000A;        url: 'http://www.youtube.com/embed/Rx6rFDYr0yk?rel=0&amp;showinfo=0',&#x000A;        time: '2:45'&#x000A;    }));&#x000A;&#x000A;    videos.push(new Video({&#x000A;        slug: 'managing-and-preventing-piles',&#x000A;        caption: 'Managing &amp; preventing piles',&#x000A;        url: 'http://www.youtube.com/embed/KM_9C26jIIg?rel=0&amp;showinfo=0',&#x000A;        time: '2:49'&#x000A;    }));&#x000A;&#x000A;    videos.push(new Video({&#x000A;        slug: 'full-length-piles-advice-video',&#x000A;        caption: 'Watch the full length piles advice video',&#x000A;        url: 'http://www.youtube.com/embed/ev8ER7KZt58?rel=0&amp;showinfo=0',&#x000A;        time: '13:59'&#x000A;    }));&#x000A;&#x000A;    function getVideoFromSlug(slug) {&#x000A;&#x000A;        var video;&#x000A;        $.each(videos, function (i, v) {&#x000A;            if (slug == v.slug) {&#x000A;                video = v;&#x000A;            }&#x000A;        });&#x000A;        return video;&#x000A;    }&#x000A;&#x000A;    function renderVideoSelectors() {&#x000A;&#x000A;        var $videoSelector = $('#video-selector');&#x000A;        $.each(videos, function (i, v) {&#x000A;            $videoSelector.append(v.renderSelector());&#x000A;        });&#x000A;    }&#x000A;&#x000A;    var videoSelectorApp = $.sammy('#video-container', function () {&#x000A;&#x000A;        this.get('#/', function (context) {&#x000A;            location.hash = '/' + videos[0].slug;&#x000A;        });&#x000A;&#x000A;        this.get('#/:slug', function (context) {&#x000A;&#x000A;            var video = getVideoFromSlug(this.params.slug);&#x000A;            if (video) {&#x000A;                $('#caption').html(video.caption);&#x000A;                $('#player').html(video.renderPlayer());&#x000A;&#x000A;                trackEvent('play', video.slug);&#x000A;            } else {&#x000A;                location.hash = '/' + videos[0].slug;&#x000A;            }&#x000A;        });&#x000A;    });&#x000A;&#x000A;    $(function () {&#x000A;        renderVideoSelectors();&#x000A;        videoSelectorApp.run('#/');&#x000A;    });&#x000A;&#x000A;    function trackEvent(eventName, nowPlaying) {&#x000A;        if (_gaq) {&#x000A;            _gaq.push(['_trackEvent', 'video', eventName, nowPlaying]);&#x000A;        }&#x000A;    }&#x000A;&#x000A;})(jQuery);&#x000A;</code></pre>
                
                <p>See what I mean about its terse-ness?</p>
                
                <p>The site's design is another <a href="//www.twitter.com/leighbrett">Leigh Brett</a> masterpiece.</p>
              </article>
              <hr class='headroom'>
              <div class='text-center'>
                <a class="button secondary small" href="/portfolio/"> ↑ Portfolio</a>
              </div>
            </div>
            <div class='columns large-3 large-pull-9'>
              <aside class='panel radius'>
                <ul class='side-nav'>
                  <li>
                    <h3>Portfolio</h3>
                  </li>
                  <li class='divider'></li>
                  <li class='active'><a href="/portfolio/anusol/">Anusol</a></li>
                  <li><a href="/portfolio/benadryl/">Benadryl</a></li>
                  <li><a href="/portfolio/boozle-blog/">Boozle Blog</a></li>
                  <li><a href="/portfolio/calpol/">Calpol</a></li>
                  <li><a href="/portfolio/fortnum-and-mason/">Fortnum and Mason</a></li>
                  <li><a href="/portfolio/icklepickles-trip-tracker/">Icklepickles Trip Tracker</a></li>
                  <li><a href="/portfolio/navitas-ip/">Navitas IP</a></li>
                  <li><a href="/portfolio/pensilva-history-group/">Pensilva History Group</a></li>
                  <li><a href="/portfolio/redbox-digital/">Redbox Digital</a></li>
                  <li><a href="/portfolio/testplant-eggplant/">Testplant Eggplant</a></li>
                  <li><a href="/portfolio/world-book-night/">World Book Night</a></li>
                </ul>
              </aside>
            </div>
          </div>
        </div>
        <aside id='this_is_my_jam'></aside>
        <footer>
          <div class='row'>
            <div class='column small-6 medium-4 medium-push-2'>
              <ul class='no-bullet'>
                <li>
                  <h4>Home</h4>
                </li>
                <li>
                  <a href='/opera'>My Opera Site</a>
                </li>
                <li>
                  <a href='/'>Blog</a>
                </li>
                <li>
                  <a href='/about-me/'>About Me</a>
                </li>
                <li>
                  <a href='/portfolio/'>Portfolio</a>
                </li>
              </ul>
            </div>
            <div class='column small-6 medium-4 medium-pull-2'>
              <ul class='no-bullet'>
                <li>
                  <h4>Abroad</h4>
                </li>
                <li>
                  <a href='http://twitter.com/HughJampton' target='_blank'>Twitter</a>
                </li>
                <li>
                  <a href='http://app.strava.com/athletes/allegromanontroppo' target='_blank'>Strava</a>
                </li>
                <li>
                  <a href='https://github.com/allegromanontroppo' target='_blank'>Github</a>
                </li>
                <li>
                  <a href='http://www.thisismyjam.com/HughJampton' target='_blank'>This Is My Jam</a>
                </li>
                <li>
                  <a href='http://leningrad-velo.herokuapp.com/' target='_blank'>Leningrad Velo</a>
                </li>
              </ul>
            </div>
          </div>
        </footer>
        <footer class='credit'>
          <div class='row'>
            <div class='column'>
              <ul class='no-bullet'>
                <li>&copy; 2015 Mark Holland</li>
                <li>
                  Site powered by
                  <a href='http://middlemanapp.com/' target='_blank'>Middleman</a>
                </li>
              </ul>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </div>
  <script src="//code.jquery.com/jquery-2.0.3.min.js" type="text/javascript"></script>
  <script>
    window.jQuery || document.write('<script src="/javascripts/vendor/jquery-2.0.3.min.js"><\/script>')
  </script>
  <script src="/javascripts/application.js" type="text/javascript"></script>
  
  <script id='this_is_my_jam_template' type='text/x-handlebars-template'>
    <div style="background-image:url({{ background }})">
    <div class='row'>
      <div class='column medium-8 medium-centered large-6'>
        <a href="{{ url }}" target="_blank">
        <table class='small-12'>
          <tr>
            <td class='small-5'><img  src="{{ jamvatarMedium }}" ></td>
            <td class='small-7'>
              <h5 class='subheader text-center'>My current jam is<br>{{ title }} by {{ artist }}</h5>
            </td>
          </tr>
        </table>
        </a>
      </div>
    </div>
    </div>
  </script>
</body>
